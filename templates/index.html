<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Регистрация</title>
</head>
<body>


    <h2> Добро пожаловать в наш магазин игр</h2>

    <form id="registerForm">
        <label for="username">Имя пользователя:</label><br>
        <input type="text" id="username" name="username"><br><br>

        <label for="email">Email:</label><br>
        <input type="email" id="email" name="email"><br><br>
        <label for="phone_number">Ваш номер телефона</label><br><br>

        <input type ="text" id = "phone_number" name = "phone_number">
        <br>
        <label for="password">Пароль:</label><br>
        <input type="password" id="password" name="password"><br><br>

        <button type="submit">Зарегистрироваться</button>
    </form>

    <style>
        body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
    color: #333;
    margin: 0;
    padding: 20px;
}

h2 {
    text-align: center;
    color: #4CAF50;
}

form {
    background-color: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    max-width: 400px;
    margin: 0 auto;
}

label {
    display: block;
    margin-bottom: 8px;
    font-weight: bold;
}

input[type="text"],
input[type="email"],
input[type="password"] {
    width: 100%;
    padding: 10px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
}

button {
    background-color: #4CAF50;
    color: white;
    padding: 10px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    width: 100%;
    font-size: 16px;
}

button:hover {
    background-color: #45a049;
}

@media (max-width: 600px) {
    form {
        width: 95%;
    }
}
</style>


    <script>

    const form = document.getElementById('registerForm');

        form.addEventListener('submit', async function(event) {
            event.preventDefault();

            const username = document.getElementById('username').value;
            const email = document.getElementById('email').value;
            const phone_number = document.getElementById('phone_number').value;
            const password = document.getElementById('password').value;

            if (!username || !email || !phone_number || !password) {
                alert("Пожалуйста, заполните все поля.");
                return;
            }

            const data = {
                "username": username,
                "email": email,
                "phone_number": phone_number,
                "password": password
            };

            try {
                const response = await fetch('/user/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                if (!response.ok) {
                    throw new Error(`Ошибка: ${response.status}`);
                }

                console.log('Успешная регистрация!');
                window.location.href = '/product';
            } catch (error) {
                console.error('Ошибка при регистрации:', error.message);
            }
        });

    </script>

<!--Конечно! Вот тот же самый код с подробными комментариями к каждой строке:-->

<!--```javascript-->
<!--// Получаем элемент формы с ID 'registerForm'.-->
<!--const form = document.getElementById('registerForm');-->

<!--// Добавляем обработчик события 'submit' к форме.-->
<!--form.addEventListener('submit', async function(event) {-->
<!--    // Предотвращаем стандартное поведение браузера при отправке формы.-->
<!--    event.preventDefault();-->

<!--    // Получаем значение из поля 'username'.-->
<!--    const username = document.getElementById('username').value;-->
<!--    // Получаем значение из поля 'email'.-->
<!--    const email = document.getElementById('email').value;-->
<!--    // Получаем значение из поля 'password'.-->
<!--    const password = document.getElementById('password').value;-->

<!--    // Проверяем, заполнены ли все поля.-->
<!--    if (!username || !email || !password) {-->
<!--        // Если хотя бы одно поле пустое, выводим предупреждение и прекращаем выполнение функции.-->
<!--        alert("Пожалуйста, заполните все поля.");-->
<!--        return;-->
<!--    }-->

<!--    // Формируем объект с данными пользователя.-->
<!--    const data = {-->
<!--        username,  // Свойство 'username' будет иметь значение переменной 'username'.-->
<!--        email,     // Свойство 'email' будет иметь значение переменной 'email'.-->
<!--        password   // Свойство 'password' будет иметь значение переменной 'password'.-->
<!--    };-->

<!--    try {-->
<!--        // Выполняем асинхронный запрос на сервер с методом POST.-->
<!--        const response = await fetch('/user/register', {-->
<!--            method: 'POST',             // Указываем метод запроса.-->
<!--            headers: {-->
<!--                'Content-Type': 'application/json'  // Устанавливаем заголовок Content-Type для передачи данных в формате JSON.-->
<!--            },-->
<!--            body: JSON.stringify(data)  // Преобразуем объект 'data' в строку формата JSON и передаем её в теле запроса.-->
<!--        });-->

<!--        // Проверяем успешность ответа от сервера.-->
<!--        if (!response.ok) {-->
<!--            // Если ответ не успешен, выбрасываем ошибку с указанием статуса.-->
<!--            throw new Error(`Ошибка: ${response.status}`);-->
<!--        }-->

<!--        // Если ответ успешен, выводим сообщение в консоль.-->
<!--        console.log('Успешная регистрация!');-->
<!--    } catch (error) {-->
<!--        // Если произошла ошибка, выводим её в консоль.-->
<!--        console.error('Ошибка при регистрации:', error.message);-->
<!--    }-->
<!--});-->
<!--```-->

<!--Эти комментарии помогут вам лучше понять каждую строку кода и её назначение.-->
</body>
</html>
